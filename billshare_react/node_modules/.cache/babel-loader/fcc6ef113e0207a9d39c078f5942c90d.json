{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calculateNewValue = calculateNewValue;\n\nvar _selectionRange = require(\"./selectionRange\");\n\nvar _getValue2 = require(\"./getValue\");\n\nvar _isValidDateValue = require(\"./isValidDateValue\");\n\nvar _isValidInputTimeValue = require(\"./isValidInputTimeValue\");\n\nfunction calculateNewValue(newEntry, element) {\n  let value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : (() => {\n    var _getValue;\n\n    return (_getValue = (0, _getValue2.getValue)(element)) != null ? _getValue :\n    /* istanbul ignore next */\n    '';\n  })();\n  let selectionRange = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : (0, _selectionRange.getSelectionRange)(element);\n  let deleteContent = arguments.length > 4 ? arguments[4] : undefined;\n  const selectionStart = selectionRange.selectionStart === null ? value.length : selectionRange.selectionStart;\n  const selectionEnd = selectionRange.selectionEnd === null ? value.length : selectionRange.selectionEnd;\n  const prologEnd = Math.max(0, selectionStart === selectionEnd && deleteContent === 'backward' ? selectionStart - 1 : selectionStart);\n  const prolog = value.substring(0, prologEnd);\n  const epilogStart = Math.min(value.length, selectionStart === selectionEnd && deleteContent === 'forward' ? selectionEnd + 1 : selectionEnd);\n  const epilog = value.substring(epilogStart, value.length);\n  let newValue = `${prolog}${newEntry}${epilog}`;\n  const newSelectionStart = prologEnd + newEntry.length;\n\n  if (element.type === 'date' && !(0, _isValidDateValue.isValidDateValue)(element, newValue)) {\n    newValue = value;\n  }\n\n  if (element.type === 'time' && !(0, _isValidInputTimeValue.isValidInputTimeValue)(element, newValue)) {\n    if ((0, _isValidInputTimeValue.isValidInputTimeValue)(element, newEntry)) {\n      newValue = newEntry;\n    } else {\n      newValue = value;\n    }\n  }\n\n  return {\n    newValue,\n    newSelectionStart\n  };\n}","map":{"version":3,"sources":["/Users/yuning/Documents/GitHub/BillShare/billshare_react/node_modules/@testing-library/user-event/dist/utils/edit/calculateNewValue.js"],"names":["Object","defineProperty","exports","value","calculateNewValue","_selectionRange","require","_getValue2","_isValidDateValue","_isValidInputTimeValue","newEntry","element","_getValue","getValue","selectionRange","getSelectionRange","deleteContent","selectionStart","length","selectionEnd","prologEnd","Math","max","prolog","substring","epilogStart","min","epilog","newValue","newSelectionStart","type","isValidDateValue","isValidInputTimeValue"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,iBAAR,GAA4BA,iBAA5B;;AAEA,IAAIC,eAAe,GAAGC,OAAO,CAAC,kBAAD,CAA7B;;AAEA,IAAIC,UAAU,GAAGD,OAAO,CAAC,YAAD,CAAxB;;AAEA,IAAIE,iBAAiB,GAAGF,OAAO,CAAC,oBAAD,CAA/B;;AAEA,IAAIG,sBAAsB,GAAGH,OAAO,CAAC,yBAAD,CAApC;;AAEA,SAASF,iBAAT,CAA2BM,QAA3B,EAAqCC,OAArC,EAMuF;AAAA,MANzCR,KAMyC,uEANjC,CAAC,MAAM;AAC3D,QAAIS,SAAJ;;AAEA,WAAO,CAACA,SAAS,GAAG,CAAC,GAAGL,UAAU,CAACM,QAAf,EAAyBF,OAAzB,CAAb,KAAmD,IAAnD,GAA0DC,SAA1D;AACP;AACA,MAFA;AAGD,GANqD,GAMiC;AAAA,MAAjFE,cAAiF,uEAAhE,CAAC,GAAGT,eAAe,CAACU,iBAApB,EAAuCJ,OAAvC,CAAgE;AAAA,MAAfK,aAAe;AACrF,QAAMC,cAAc,GAAGH,cAAc,CAACG,cAAf,KAAkC,IAAlC,GAAyCd,KAAK,CAACe,MAA/C,GAAwDJ,cAAc,CAACG,cAA9F;AACA,QAAME,YAAY,GAAGL,cAAc,CAACK,YAAf,KAAgC,IAAhC,GAAuChB,KAAK,CAACe,MAA7C,GAAsDJ,cAAc,CAACK,YAA1F;AACA,QAAMC,SAAS,GAAGC,IAAI,CAACC,GAAL,CAAS,CAAT,EAAYL,cAAc,KAAKE,YAAnB,IAAmCH,aAAa,KAAK,UAArD,GAAkEC,cAAc,GAAG,CAAnF,GAAuFA,cAAnG,CAAlB;AACA,QAAMM,MAAM,GAAGpB,KAAK,CAACqB,SAAN,CAAgB,CAAhB,EAAmBJ,SAAnB,CAAf;AACA,QAAMK,WAAW,GAAGJ,IAAI,CAACK,GAAL,CAASvB,KAAK,CAACe,MAAf,EAAuBD,cAAc,KAAKE,YAAnB,IAAmCH,aAAa,KAAK,SAArD,GAAiEG,YAAY,GAAG,CAAhF,GAAoFA,YAA3G,CAApB;AACA,QAAMQ,MAAM,GAAGxB,KAAK,CAACqB,SAAN,CAAgBC,WAAhB,EAA6BtB,KAAK,CAACe,MAAnC,CAAf;AACA,MAAIU,QAAQ,GAAI,GAAEL,MAAO,GAAEb,QAAS,GAAEiB,MAAO,EAA7C;AACA,QAAME,iBAAiB,GAAGT,SAAS,GAAGV,QAAQ,CAACQ,MAA/C;;AAEA,MAAIP,OAAO,CAACmB,IAAR,KAAiB,MAAjB,IAA2B,CAAC,CAAC,GAAGtB,iBAAiB,CAACuB,gBAAtB,EAAwCpB,OAAxC,EAAiDiB,QAAjD,CAAhC,EAA4F;AAC1FA,IAAAA,QAAQ,GAAGzB,KAAX;AACD;;AAED,MAAIQ,OAAO,CAACmB,IAAR,KAAiB,MAAjB,IAA2B,CAAC,CAAC,GAAGrB,sBAAsB,CAACuB,qBAA3B,EAAkDrB,OAAlD,EAA2DiB,QAA3D,CAAhC,EAAsG;AACpG,QAAI,CAAC,GAAGnB,sBAAsB,CAACuB,qBAA3B,EAAkDrB,OAAlD,EAA2DD,QAA3D,CAAJ,EAA0E;AACxEkB,MAAAA,QAAQ,GAAGlB,QAAX;AACD,KAFD,MAEO;AACLkB,MAAAA,QAAQ,GAAGzB,KAAX;AACD;AACF;;AAED,SAAO;AACLyB,IAAAA,QADK;AAELC,IAAAA;AAFK,GAAP;AAID","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calculateNewValue = calculateNewValue;\n\nvar _selectionRange = require(\"./selectionRange\");\n\nvar _getValue2 = require(\"./getValue\");\n\nvar _isValidDateValue = require(\"./isValidDateValue\");\n\nvar _isValidInputTimeValue = require(\"./isValidInputTimeValue\");\n\nfunction calculateNewValue(newEntry, element, value = (() => {\n  var _getValue;\n\n  return (_getValue = (0, _getValue2.getValue)(element)) != null ? _getValue :\n  /* istanbul ignore next */\n  '';\n})(), selectionRange = (0, _selectionRange.getSelectionRange)(element), deleteContent) {\n  const selectionStart = selectionRange.selectionStart === null ? value.length : selectionRange.selectionStart;\n  const selectionEnd = selectionRange.selectionEnd === null ? value.length : selectionRange.selectionEnd;\n  const prologEnd = Math.max(0, selectionStart === selectionEnd && deleteContent === 'backward' ? selectionStart - 1 : selectionStart);\n  const prolog = value.substring(0, prologEnd);\n  const epilogStart = Math.min(value.length, selectionStart === selectionEnd && deleteContent === 'forward' ? selectionEnd + 1 : selectionEnd);\n  const epilog = value.substring(epilogStart, value.length);\n  let newValue = `${prolog}${newEntry}${epilog}`;\n  const newSelectionStart = prologEnd + newEntry.length;\n\n  if (element.type === 'date' && !(0, _isValidDateValue.isValidDateValue)(element, newValue)) {\n    newValue = value;\n  }\n\n  if (element.type === 'time' && !(0, _isValidInputTimeValue.isValidInputTimeValue)(element, newValue)) {\n    if ((0, _isValidInputTimeValue.isValidInputTimeValue)(element, newEntry)) {\n      newValue = newEntry;\n    } else {\n      newValue = value;\n    }\n  }\n\n  return {\n    newValue,\n    newSelectionStart\n  };\n}"]},"metadata":{},"sourceType":"script"}